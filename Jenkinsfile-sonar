pipeline{
    agent any
    tools{
        maven 'maven_3.8.6'
    }
    stages{
        stage ('Build'){
          steps{
              script{
              sh 'mvn clean install'
              } 
             }
          }
        stage ('Sonarqube analysis'){
          steps{
              script{
              echo "Sonar check"
              sh "mvn clean verify sonar:sonar -Dsonar.projectKey=Java-test-sonarqube -Dsonar.projectName='Java-test-sonarqube'"
               }
              }
          }
    }
}
